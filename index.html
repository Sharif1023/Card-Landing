<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fanned Product Cards + Search + Modal + Order (Tailwind Only)</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="min-h-screen flex items-center justify-center font-sans text-emerald-950 bg-[#F2FFF6]">



  <!-- TOP BAR: SEARCH -->
  <div class="fixed top-4 left-1/2 -translate-x-1/2 z-[99999] w-[min(720px,92vw)]">
    <div class="flex gap-2 items-center bg-white/80 backdrop-blur-xl border border-emerald-200 rounded-2xl shadow-[0_14px_40px_rgba(2,6,23,.12)] px-3 py-2">
      <div class="text-sm font-extrabold text-emerald-800 px-2">Search</div>
      <input id="searchInput" type="text" placeholder="Type: shirt / pant / shoe / cap / sunglasses"
        class="w-full bg-transparent outline-none text-sm font-semibold text-emerald-950 placeholder:text-emerald-700/60"
      />
      <button id="clearBtn"
        class="px-3 py-2 text-xs font-extrabold rounded-xl border border-emerald-200 bg-white hover:bg-emerald-50">
        Clear
      </button>
    </div>
    <div id="resultHint" class="mt-2 text-center text-xs font-semibold text-emerald-900/70"></div>
  </div>

  <!-- FAN WRAP -->
  <div id="fan" class="relative w-full max-w-[600px] h-[650px] px-2 mt-24">

    <!-- =========================
         CARD TEMPLATE NOTES
         Each card uses:
         data-key, data-title, data-desc,
         data-price, data-stock, data-sizes, data-colors,
         data-images (comma-separated)
    ========================== -->

    <!-- 1) SHIRT -->
    <div class="fan-card absolute inset-0 m-auto
      w-[56%] h-[95%]
      rounded-[30px] overflow-hidden
      border border-emerald-200/70
      bg-gradient-to-b from-emerald-50 to-white
      cursor-pointer select-none
      transition-transform duration-[600ms] ease-[cubic-bezier(.2,.9,.2,1)]
      transition-shadow duration-[600ms]
      [transform-origin:50%_75%]
      shadow-[0_44px_95px_rgba(2,6,23,.26)]
      hover:shadow-[0_54px_120px_rgba(2,6,23,.32)]
      hover:-translate-y-4 hover:scale-[1.03]
      "
      data-key="shirt"
      data-title="Shirt Collection"
      data-desc="Premium shirts — casual & formal. Soft fabric, clean stitch, daily comfort."
      data-price="৳ 799"
      data-stock="In Stock"
      data-sizes="S, M, L, XL, XXL"
      data-colors="White, Black, Navy, Olive"
      data-images="
        https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?auto=format&fit=crop&w=1600&q=80,
        https://images.unsplash.com/photo-1520975958225-1f6538a6f0f9?auto=format&fit=crop&w=1600&q=80,
        https://images.unsplash.com/photo-1520975682031-a90f57c70c07?auto=format&fit=crop&w=1600&q=80,
        https://images.unsplash.com/photo-1516826957135-700dedea698c?auto=format&fit=crop&w=1600&q=80
      "
    >
      <div class="h-12 px-4 flex items-center justify-between bg-white/70 backdrop-blur-xl border-b border-emerald-200/60">
        <div class="flex gap-2">
          <span class="w-3 h-3 rounded-full bg-red-400"></span>
          <span class="w-3 h-3 rounded-full bg-yellow-400"></span>
          <span class="w-3 h-3 rounded-full bg-green-400"></span>
        </div>
        <span class="text-xs font-extrabold text-emerald-800/80">Shirt</span>
      </div>

      <div class="m-[18px] h-[200px] rounded-[22px] overflow-hidden border border-emerald-200/60 bg-slate-950">
        <img class="w-full h-full object-cover block"
          src="https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?auto=format&fit=crop&w=1200&q=80" alt="Shirt">
      </div>

      <div class="mx-[18px] grid gap-2">
        <div class="h-[11px] rounded-full bg-gradient-to-r from-emerald-200/70 to-emerald-100/40 w-[80%]"></div>
        <div class="h-[11px] rounded-full bg-gradient-to-r from-emerald-200/70 to-emerald-100/40 w-[60%]"></div>
      </div>

      <div class="m-[18px] grid grid-cols-3 gap-3">
        <div class="h-[92px] rounded-[18px] overflow-hidden border border-emerald-200/60 bg-slate-950">
          <img class="w-full h-full object-cover block"
            src="https://images.unsplash.com/photo-1520975958225-1f6538a6f0f9?auto=format&fit=crop&w=600&q=80" alt="">
        </div>
        <div class="h-[92px] rounded-[18px] overflow-hidden border border-emerald-200/60 bg-slate-950">
          <img class="w-full h-full object-cover block"
            src="https://images.unsplash.com/photo-1520975682031-a90f57c70c07?auto=format&fit=crop&w=600&q=80" alt="">
        </div>
        <div class="h-[92px] rounded-[18px] overflow-hidden border border-emerald-200/60 bg-slate-950">
          <img class="w-full h-full object-cover block"
            src="https://images.unsplash.com/photo-1516826957135-700dedea698c?auto=format&fit=crop&w=600&q=80" alt="">
        </div>
      </div>

      <!-- Bottom CTA (Order) -->
      <div class="absolute bottom-4 left-0 right-0 px-5">
        <div class="flex items-center justify-between gap-2 bg-white/80 backdrop-blur-xl border border-emerald-200/60 rounded-2xl px-4 py-3 shadow-[0_10px_24px_rgba(2,6,23,.10)]">
          <div>
            <div class="text-xs font-extrabold text-emerald-900/70">Price</div>
            <div class="text-sm font-black text-emerald-950">৳ 799</div>
          </div>
          <button class="orderBtn px-4 py-2 rounded-xl text-xs font-extrabold text-white
            bg-gradient-to-b from-emerald-500 to-emerald-600 hover:brightness-95 border border-emerald-200/20"
          >Order</button>
        </div>
      </div>
    </div>

    <!-- 2) PANT -->
    <div class="fan-card absolute inset-0 m-auto
      w-[56%] h-[95%]
      rounded-[30px] overflow-hidden
      border border-emerald-200/70
      bg-gradient-to-b from-emerald-50 to-white
      cursor-pointer select-none
      transition-transform duration-[600ms] ease-[cubic-bezier(.2,.9,.2,1)]
      transition-shadow duration-[600ms]
      [transform-origin:50%_75%]
      shadow-[0_44px_95px_rgba(2,6,23,.26)]
      hover:shadow-[0_54px_120px_rgba(2,6,23,.32)]
      hover:-translate-y-4 hover:scale-[1.03]
      "
      data-key="pant"
      data-title="Pant / Trouser"
      data-desc="Smart pants — jeans/chinos/formal. Comfortable fit & premium finishing."
      data-price="৳ 999"
      data-stock="Limited Stock"
      data-sizes="28, 30, 32, 34, 36"
      data-colors="Blue, Black, Grey, Khaki"
      data-images="
        https://images.unsplash.com/photo-1541099649105-f69ad21f3246?auto=format&fit=crop&w=1600&q=80,
        https://images.unsplash.com/photo-1473966968600-fa801b869a1a?auto=format&fit=crop&w=1600&q=80,
        https://images.unsplash.com/photo-1520975688845-0c2f5d2b7b38?auto=format&fit=crop&w=1600&q=80,
        https://images.unsplash.com/photo-1542291026-7eec264c27ff?auto=format&fit=crop&w=1600&q=80
      "
    >
      <div class="h-12 px-4 flex items-center justify-between bg-white/70 backdrop-blur-xl border-b border-emerald-200/60">
        <div class="flex gap-2">
          <span class="w-3 h-3 rounded-full bg-red-400"></span>
          <span class="w-3 h-3 rounded-full bg-yellow-400"></span>
          <span class="w-3 h-3 rounded-full bg-green-400"></span>
        </div>
        <span class="text-xs font-extrabold text-emerald-800/80">Pant</span>
      </div>

      <div class="m-[18px] h-[200px] rounded-[22px] overflow-hidden border border-emerald-200/60 bg-slate-950">
        <img class="w-full h-full object-cover block"
          src="https://images.unsplash.com/photo-1541099649105-f69ad21f3246?auto=format&fit=crop&w=1200&q=80" alt="Pant">
      </div>

      <div class="mx-[18px] grid gap-2">
        <div class="h-[11px] rounded-full bg-gradient-to-r from-emerald-200/70 to-emerald-100/40 w-[60%]"></div>
        <div class="h-[11px] rounded-full bg-gradient-to-r from-emerald-200/70 to-emerald-100/40 w-[80%]"></div>
      </div>

      <div class="m-[18px] grid grid-cols-3 gap-3">
        <div class="h-[92px] rounded-[18px] overflow-hidden border border-emerald-200/60 bg-slate-950">
          <img class="w-full h-full object-cover block"
            src="https://images.unsplash.com/photo-1473966968600-fa801b869a1a?auto=format&fit=crop&w=600&q=80" alt="">
        </div>
        <div class="h-[92px] rounded-[18px] overflow-hidden border border-emerald-200/60 bg-slate-950">
          <img class="w-full h-full object-cover block"
            src="https://images.unsplash.com/photo-1520975688845-0c2f5d2b7b38?auto=format&fit=crop&w=600&q=80" alt="">
        </div>
        <div class="h-[92px] rounded-[18px] overflow-hidden border border-emerald-200/60 bg-slate-950">
          <img class="w-full h-full object-cover block"
            src="https://images.unsplash.com/photo-1542291026-7eec264c27ff?auto=format&fit=crop&w=600&q=80" alt="">
        </div>
      </div>

      <div class="absolute bottom-4 left-0 right-0 px-5">
        <div class="flex items-center justify-between gap-2 bg-white/80 backdrop-blur-xl border border-emerald-200/60 rounded-2xl px-4 py-3 shadow-[0_10px_24px_rgba(2,6,23,.10)]">
          <div>
            <div class="text-xs font-extrabold text-emerald-900/70">Price</div>
            <div class="text-sm font-black text-emerald-950">৳ 999</div>
          </div>
          <button class="orderBtn px-4 py-2 rounded-xl text-xs font-extrabold text-white
            bg-gradient-to-b from-emerald-500 to-emerald-600 hover:brightness-95 border border-emerald-200/20"
          >Order</button>
        </div>
      </div>
    </div>

    <!-- 3) SHOE -->
    <div class="fan-card absolute inset-0 m-auto
      w-[56%] h-[95%]
      rounded-[30px] overflow-hidden
      border border-emerald-200/70
      bg-gradient-to-b from-emerald-50 to-white
      cursor-pointer select-none
      transition-transform duration-[600ms] ease-[cubic-bezier(.2,.9,.2,1)]
      transition-shadow duration-[600ms]
      [transform-origin:50%_75%]
      shadow-[0_44px_95px_rgba(2,6,23,.26)]
      hover:shadow-[0_54px_120px_rgba(2,6,23,.32)]
      hover:-translate-y-4 hover:scale-[1.03]
      "
      data-key="shoe"
      data-title="Shoe Collection"
      data-desc="Sneakers & casual shoes — comfy sole, durable build, stylish look."
      data-price="৳ 1,499"
      data-stock="In Stock"
      data-sizes="39, 40, 41, 42, 43"
      data-colors="White, Black, Grey"
      data-images="
        https://images.unsplash.com/photo-1542291026-7eec264c27ff?auto=format&fit=crop&w=1600&q=80,
        https://images.unsplash.com/photo-1528701800489-20be3c3ea6f4?auto=format&fit=crop&w=1600&q=80,
        https://images.unsplash.com/photo-1543163521-1bf539c55dd2?auto=format&fit=crop&w=1600&q=80,
        https://images.unsplash.com/photo-1549298916-b41d501d3772?auto=format&fit=crop&w=1600&q=80
      "
    >
      <div class="h-12 px-4 flex items-center justify-between bg-white/70 backdrop-blur-xl border-b border-emerald-200/60">
        <div class="flex gap-2">
          <span class="w-3 h-3 rounded-full bg-red-400"></span>
          <span class="w-3 h-3 rounded-full bg-yellow-400"></span>
          <span class="w-3 h-3 rounded-full bg-green-400"></span>
        </div>
        <span class="text-xs font-extrabold text-emerald-800/80">Shoe</span>
      </div>

      <div class="px-4 pt-5 text-center">
        <p class="text-xs tracking-widest font-semibold text-emerald-900/70">NEW ARRIVALS</p>
        <h3 class="text-2xl font-extrabold mt-1 text-emerald-950">
          TRENDY <span class="text-emerald-600">SHOES</span>
        </h3>
        <p class="text-xs mt-1 text-emerald-900/60">Click to preview</p>
      </div>

      <div class="m-[18px] h-[200px] rounded-[22px] overflow-hidden border border-emerald-200/60 bg-slate-950">
        <img class="w-full h-full object-cover block"
          src="https://images.unsplash.com/photo-1542291026-7eec264c27ff?auto=format&fit=crop&w=1200&q=80" alt="Shoe">
      </div>

      <div class="mx-[18px] grid gap-2">
        <div class="h-[11px] rounded-full bg-gradient-to-r from-emerald-200/70 to-emerald-100/40 w-[80%]"></div>
        <div class="h-[11px] rounded-full bg-gradient-to-r from-emerald-200/70 to-emerald-100/40 w-[45%]"></div>
      </div>

      <div class="m-[18px] grid grid-cols-3 gap-3">
        <div class="h-[92px] rounded-[18px] overflow-hidden border border-emerald-200/60 bg-slate-950">
          <img class="w-full h-full object-cover block"
            src="https://images.unsplash.com/photo-1528701800489-20be3c3ea6f4?auto=format&fit=crop&w=600&q=80" alt="">
        </div>
        <div class="h-[92px] rounded-[18px] overflow-hidden border border-emerald-200/60 bg-slate-950">
          <img class="w-full h-full object-cover block"
            src="https://images.unsplash.com/photo-1543163521-1bf539c55dd2?auto=format&fit=crop&w=600&q=80" alt="">
        </div>
        <div class="h-[92px] rounded-[18px] overflow-hidden border border-emerald-200/60 bg-slate-950">
          <img class="w-full h-full object-cover block"
            src="https://images.unsplash.com/photo-1549298916-b41d501d3772?auto=format&fit=crop&w=600&q=80" alt="">
        </div>
      </div>

      <div class="absolute bottom-4 left-0 right-0 px-5">
        <div class="flex items-center justify-between gap-2 bg-white/80 backdrop-blur-xl border border-emerald-200/60 rounded-2xl px-4 py-3 shadow-[0_10px_24px_rgba(2,6,23,.10)]">
          <div>
            <div class="text-xs font-extrabold text-emerald-900/70">Price</div>
            <div class="text-sm font-black text-emerald-950">৳ 1,499</div>
          </div>
          <button class="orderBtn px-4 py-2 rounded-xl text-xs font-extrabold text-white
            bg-gradient-to-b from-emerald-500 to-emerald-600 hover:brightness-95 border border-emerald-200/20"
          >Order</button>
        </div>
      </div>
    </div>

    <!-- 4) CAP -->
    <div class="fan-card absolute inset-0 m-auto
      w-[56%] h-[95%]
      rounded-[30px] overflow-hidden
      border border-emerald-200/70
      bg-gradient-to-b from-emerald-50 to-white
      cursor-pointer select-none
      transition-transform duration-[600ms] ease-[cubic-bezier(.2,.9,.2,1)]
      transition-shadow duration-[600ms]
      [transform-origin:50%_75%]
      shadow-[0_44px_95px_rgba(2,6,23,.26)]
      hover:shadow-[0_54px_120px_rgba(2,6,23,.32)]
      hover:-translate-y-4 hover:scale-[1.03]
      "
      data-key="cap"
      data-title="Cap / Hat"
      data-desc="Caps & hats — comfortable and stylish. Great for everyday street style."
      data-price="৳ 399"
      data-stock="In Stock"
      data-sizes="Free Size"
      data-colors="Black, White, Brown"
      data-images="
        https://images.unsplash.com/photo-1529612700005-e35377bf1415?auto=format&fit=crop&w=1600&q=80,
        https://images.unsplash.com/photo-1517949908114-720e0f4a84b9?auto=format&fit=crop&w=1600&q=80,
        https://images.unsplash.com/photo-1520975958225-1f6538a6f0f9?auto=format&fit=crop&w=1600&q=80,
        https://images.unsplash.com/photo-1520975688845-0c2f5d2b7b38?auto=format&fit=crop&w=1600&q=80
      "
    >
      <div class="h-12 px-4 flex items-center justify-between bg-white/70 backdrop-blur-xl border-b border-emerald-200/60">
        <div class="flex gap-2">
          <span class="w-3 h-3 rounded-full bg-red-400"></span>
          <span class="w-3 h-3 rounded-full bg-yellow-400"></span>
          <span class="w-3 h-3 rounded-full bg-green-400"></span>
        </div>
        <span class="text-xs font-extrabold text-emerald-800/80">Cap</span>
      </div>

      <div class="m-[18px] h-[200px] rounded-[22px] overflow-hidden border border-emerald-200/60 bg-slate-950">
        <img class="w-full h-full object-cover block"
          src="https://images.unsplash.com/photo-1529612700005-e35377bf1415?auto=format&fit=crop&w=1200&q=80" alt="Cap">
      </div>

      <div class="mx-[18px] grid gap-2">
        <div class="h-[11px] rounded-full bg-gradient-to-r from-emerald-200/70 to-emerald-100/40 w-[45%]"></div>
        <div class="h-[11px] rounded-full bg-gradient-to-r from-emerald-200/70 to-emerald-100/40 w-[60%]"></div>
      </div>

      <div class="m-[18px] grid grid-cols-3 gap-3">
        <div class="h-[92px] rounded-[18px] overflow-hidden border border-emerald-200/60 bg-slate-950">
          <img class="w-full h-full object-cover block"
            src="https://images.unsplash.com/photo-1517949908114-720e0f4a84b9?auto=format&fit=crop&w=600&q=80" alt="">
        </div>
        <div class="h-[92px] rounded-[18px] overflow-hidden border border-emerald-200/60 bg-slate-950">
          <img class="w-full h-full object-cover block"
            src="https://images.unsplash.com/photo-1520975958225-1f6538a6f0f9?auto=format&fit=crop&w=600&q=80" alt="">
        </div>
        <div class="h-[92px] rounded-[18px] overflow-hidden border border-emerald-200/60 bg-slate-950">
          <img class="w-full h-full object-cover block"
            src="https://images.unsplash.com/photo-1520975688845-0c2f5d2b7b38?auto=format&fit=crop&w=600&q=80" alt="">
        </div>
      </div>

      <div class="absolute bottom-4 left-0 right-0 px-5">
        <div class="flex items-center justify-between gap-2 bg-white/80 backdrop-blur-xl border border-emerald-200/60 rounded-2xl px-4 py-3 shadow-[0_10px_24px_rgba(2,6,23,.10)]">
          <div>
            <div class="text-xs font-extrabold text-emerald-900/70">Price</div>
            <div class="text-sm font-black text-emerald-950">৳ 399</div>
          </div>
          <button class="orderBtn px-4 py-2 rounded-xl text-xs font-extrabold text-white
            bg-gradient-to-b from-emerald-500 to-emerald-600 hover:brightness-95 border border-emerald-200/20"
          >Order</button>
        </div>
      </div>
    </div>

    <!-- 5) SUNGLASSES -->
    <div class="fan-card absolute inset-0 m-auto
      w-[56%] h-[95%]
      rounded-[30px] overflow-hidden
      border border-emerald-200/70
      bg-gradient-to-b from-emerald-50 to-white
      cursor-pointer select-none
      transition-transform duration-[600ms] ease-[cubic-bezier(.2,.9,.2,1)]
      transition-shadow duration-[600ms]
      [transform-origin:50%_75%]
      shadow-[0_44px_95px_rgba(2,6,23,.26)]
      hover:shadow-[0_54px_120px_rgba(2,6,23,.32)]
      hover:-translate-y-4 hover:scale-[1.03]
      "
      data-key="sunglasses"
      data-title="Sunglasses"
      data-desc="Sunglasses — modern frames, stylish lenses. Great for outdoor use."
      data-price="৳ 599"
      data-stock="In Stock"
      data-sizes="Standard"
      data-colors="Black, Brown"
      data-images="
        https://images.unsplash.com/photo-1511499767150-a48a237f0083?auto=format&fit=crop&w=1600&q=80,
        https://images.unsplash.com/photo-1508296695146-257a814070b4?auto=format&fit=crop&w=1600&q=80,
        https://images.unsplash.com/photo-1520975958225-1f6538a6f0f9?auto=format&fit=crop&w=1600&q=80,
        https://images.unsplash.com/photo-1520975688845-0c2f5d2b7b38?auto=format&fit=crop&w=1600&q=80
      "
    >
      <div class="h-12 px-4 flex items-center justify-between bg-white/70 backdrop-blur-xl border-b border-emerald-200/60">
        <div class="flex gap-2">
          <span class="w-3 h-3 rounded-full bg-red-400"></span>
          <span class="w-3 h-3 rounded-full bg-yellow-400"></span>
          <span class="w-3 h-3 rounded-full bg-green-400"></span>
        </div>
        <span class="text-xs font-extrabold text-emerald-800/80">Sunglasses</span>
      </div>

      <div class="m-[18px] h-[200px] rounded-[22px] overflow-hidden border border-emerald-200/60 bg-slate-950">
        <img class="w-full h-full object-cover block"
          src="https://images.unsplash.com/photo-1511499767150-a48a237f0083?auto=format&fit=crop&w=1200&q=80" alt="Sunglasses">
      </div>

      <div class="mx-[18px] grid gap-2">
        <div class="h-[11px] rounded-full bg-gradient-to-r from-emerald-200/70 to-emerald-100/40 w-[60%]"></div>
        <div class="h-[11px] rounded-full bg-gradient-to-r from-emerald-200/70 to-emerald-100/40 w-[80%]"></div>
      </div>

      <div class="m-[18px] grid grid-cols-3 gap-3">
        <div class="h-[92px] rounded-[18px] overflow-hidden border border-emerald-200/60 bg-slate-950">
          <img class="w-full h-full object-cover block"
            src="https://images.unsplash.com/photo-1508296695146-257a814070b4?auto=format&fit=crop&w=600&q=80" alt="">
        </div>
        <div class="h-[92px] rounded-[18px] overflow-hidden border border-emerald-200/60 bg-slate-950">
          <img class="w-full h-full object-cover block"
            src="https://images.unsplash.com/photo-1520975958225-1f6538a6f0f9?auto=format&fit=crop&w=600&q=80" alt="">
        </div>
        <div class="h-[92px] rounded-[18px] overflow-hidden border border-emerald-200/60 bg-slate-950">
          <img class="w-full h-full object-cover block"
            src="https://images.unsplash.com/photo-1520975688845-0c2f5d2b7b38?auto=format&fit=crop&w=600&q=80" alt="">
        </div>
      </div>

      <div class="absolute bottom-4 left-0 right-0 px-5">
        <div class="flex items-center justify-between gap-2 bg-white/80 backdrop-blur-xl border border-emerald-200/60 rounded-2xl px-4 py-3 shadow-[0_10px_24px_rgba(2,6,23,.10)]">
          <div>
            <div class="text-xs font-extrabold text-emerald-900/70">Price</div>
            <div class="text-sm font-black text-emerald-950">৳ 599</div>
          </div>
          <button class="orderBtn px-4 py-2 rounded-xl text-xs font-extrabold text-white
            bg-gradient-to-b from-emerald-500 to-emerald-600 hover:brightness-95 border border-emerald-200/20"
          >Order</button>
        </div>
      </div>
    </div>

  </div>

  <!-- ========================= MODAL: PREVIEW + DETAILS ========================= -->
  <div id="modal" class="fixed inset-0 hidden items-center justify-center p-4 z-[999999]">
    <div id="modalBackdrop" class="absolute inset-0 bg-slate-950/60 backdrop-blur-md"></div>

    <div id="modalPanel" class="relative w-[min(1120px,96vw)] max-h-[92vh] overflow-hidden
      rounded-[22px] border border-emerald-200/30
      bg-white/90 shadow-[0_60px_140px_rgba(2,6,23,.55)]
      translate-y-2 scale-[.98] opacity-0
      transition-all duration-200
    ">
      <div class="flex items-center justify-between gap-2 p-3 border-b border-emerald-200/50 bg-white/70">
        <div id="modalTitle" class="text-sm font-black text-emerald-950">Preview</div>

        <div class="flex flex-wrap gap-2">
          <button class="px-3 py-2 text-xs font-extrabold rounded-xl border border-emerald-200 bg-white hover:bg-emerald-50" id="prevBtn">◀ Prev</button>
          <button class="px-3 py-2 text-xs font-extrabold rounded-xl border border-emerald-200 bg-white hover:bg-emerald-50" id="nextBtn">Next ▶</button>

          <div class="flex items-center gap-2 px-3 py-2 rounded-xl border border-emerald-200 bg-white">
            <span class="text-xs font-extrabold">Zoom</span>
            <button class="px-2 py-1 text-xs font-extrabold rounded-lg border border-emerald-200 bg-white hover:bg-emerald-50" id="zoomOutBtn">−</button>
            <button class="px-2 py-1 text-xs font-extrabold rounded-lg border border-emerald-200 bg-white hover:bg-emerald-50" id="zoomInBtn">+</button>
            <button class="px-2 py-1 text-xs font-extrabold rounded-lg border border-emerald-200 bg-white hover:bg-emerald-50" id="resetBtn">Reset</button>
          </div>

          <button class="px-3 py-2 text-xs font-extrabold rounded-xl border border-emerald-200 bg-white hover:bg-emerald-50" id="downloadBtn">Download</button>

          <button class="px-3 py-2 text-xs font-extrabold rounded-xl border border-emerald-200
            bg-gradient-to-b from-emerald-500 to-emerald-600 text-white hover:brightness-95"
            id="orderNowBtn"
          >Order Now</button>

          <button class="px-3 py-2 text-xs font-extrabold rounded-xl border border-emerald-200
            bg-white hover:bg-emerald-50"
            id="closeBtn"
          >Close ✕</button>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-[1.25fr_.75fr] gap-3 p-3">
        <!-- preview -->
        <div id="previewBox" class="relative min-h-[360px] rounded-[18px] overflow-hidden border border-emerald-200/50 bg-slate-950">
          <div id="viewport" class="absolute inset-0 cursor-grab"></div>
          <img id="modalImg" class="absolute left-1/2 top-1/2 select-none pointer-events-none max-w-none max-h-none"
               style="transform: translate(-50%,-50%) scale(1);" src="" alt="Preview">
        </div>

        <!-- meta -->
        <div class="rounded-[18px] border border-emerald-200/60 bg-white/90 p-4">
          <p class="text-xs font-extrabold text-emerald-900/80">Product</p>
          <p id="metaName" class="mt-1 text-sm font-black text-emerald-950">—</p>

          <p class="mt-3 text-xs font-extrabold text-emerald-900/80">Details</p>
          <p id="metaDesc" class="mt-2 text-sm font-semibold text-emerald-900/80 leading-relaxed">—</p>

          <!-- structured specs -->
          <div class="mt-4 grid gap-2">
            <div class="flex items-center justify-between rounded-xl border border-emerald-200 bg-white px-3 py-2">
              <span class="text-xs font-extrabold text-emerald-900/70">Price</span>
              <span id="metaPrice" class="text-xs font-black text-emerald-950">—</span>
            </div>
            <div class="flex items-center justify-between rounded-xl border border-emerald-200 bg-white px-3 py-2">
              <span class="text-xs font-extrabold text-emerald-900/70">Stock</span>
              <span id="metaStock" class="text-xs font-black text-emerald-950">—</span>
            </div>
            <div class="rounded-xl border border-emerald-200 bg-white px-3 py-2">
              <div class="text-xs font-extrabold text-emerald-900/70">Sizes</div>
              <div id="metaSizes" class="mt-1 text-xs font-black text-emerald-950">—</div>
            </div>
            <div class="rounded-xl border border-emerald-200 bg-white px-3 py-2">
              <div class="text-xs font-extrabold text-emerald-900/70">Colors</div>
              <div id="metaColors" class="mt-1 text-xs font-black text-emerald-950">—</div>
            </div>
          </div>

          <div class="mt-4 grid gap-2">
            <button class="px-3 py-2 text-xs font-extrabold rounded-xl border border-emerald-200 bg-white hover:bg-emerald-50" id="openImgBtn">Open Image</button>
            <button class="px-3 py-2 text-xs font-extrabold rounded-xl border border-emerald-200 bg-white hover:bg-emerald-50" id="copyLinkBtn">Copy Image URL</button>
          </div>

          <p class="mt-4 text-xs font-extrabold text-emerald-900/80">Shortcuts</p>
          <p class="mt-2 text-sm font-semibold text-emerald-900/80 leading-relaxed">
            <b>Esc</b> close • <b>←/→</b> prev/next • <b>+</b>/<b>-</b> zoom • <b>0</b> reset
          </p>
        </div>
      </div>

      <!-- thumbs -->
      <div id="thumbStrip" class="flex gap-2 overflow-auto p-3 border-t border-emerald-200/50 bg-white/70"></div>
    </div>
  </div>

  <!-- ========================= ORDER FORM MODAL ========================= -->
  <div id="orderModal" class="fixed inset-0 hidden items-center justify-center p-4 z-[1000000]">
    <div id="orderBackdrop" class="absolute inset-0 bg-slate-950/60 backdrop-blur-md"></div>

    <div id="orderPanel" class="relative w-[min(560px,96vw)] overflow-hidden
      rounded-[22px] border border-emerald-200/30
      bg-white/92 shadow-[0_60px_140px_rgba(2,6,23,.55)]
      translate-y-2 scale-[.98] opacity-0
      transition-all duration-200
    ">
      <div class="flex items-center justify-between gap-2 p-3 border-b border-emerald-200/50 bg-white/70">
        <div class="text-sm font-black text-emerald-950">Place Order</div>
        <button id="orderCloseBtn" class="px-3 py-2 text-xs font-extrabold rounded-xl border border-emerald-200 bg-white hover:bg-emerald-50">
          Close ✕
        </button>
      </div>

      <form id="orderForm" class="p-4 grid gap-3">
        <div class="rounded-xl border border-emerald-200 bg-white px-3 py-2">
          <div class="text-xs font-extrabold text-emerald-900/70">Product</div>
          <div id="ofProduct" class="mt-1 text-sm font-black text-emerald-950">—</div>
        </div>

        <div class="grid grid-cols-2 gap-3">
          <div class="rounded-xl border border-emerald-200 bg-white px-3 py-2">
            <div class="text-xs font-extrabold text-emerald-900/70">Price</div>
            <div id="ofPrice" class="mt-1 text-sm font-black text-emerald-950">—</div>
          </div>
          <div class="rounded-xl border border-emerald-200 bg-white px-3 py-2">
            <div class="text-xs font-extrabold text-emerald-900/70">Stock</div>
            <div id="ofStock" class="mt-1 text-sm font-black text-emerald-950">—</div>
          </div>
        </div>

        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-extrabold text-emerald-900/70 mb-1">Size</label>
            <select id="ofSize" class="w-full px-3 py-2 rounded-xl border border-emerald-200 bg-white text-sm font-semibold outline-none">
              <option value="">Select size</option>
            </select>
          </div>
          <div>
            <label class="block text-xs font-extrabold text-emerald-900/70 mb-1">Color</label>
            <select id="ofColor" class="w-full px-3 py-2 rounded-xl border border-emerald-200 bg-white text-sm font-semibold outline-none">
              <option value="">Select color</option>
            </select>
          </div>
        </div>

        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-extrabold text-emerald-900/70 mb-1">Quantity</label>
            <input id="ofQty" type="number" min="1" value="1"
              class="w-full px-3 py-2 rounded-xl border border-emerald-200 bg-white text-sm font-semibold outline-none" />
          </div>
          <div>
            <label class="block text-xs font-extrabold text-emerald-900/70 mb-1">Phone</label>
            <input id="ofPhone" type="tel" placeholder="01XXXXXXXXX"
              class="w-full px-3 py-2 rounded-xl border border-emerald-200 bg-white text-sm font-semibold outline-none" />
          </div>
        </div>

        <div>
          <label class="block text-xs font-extrabold text-emerald-900/70 mb-1">Delivery Address</label>
          <textarea id="ofAddress" rows="3" placeholder="Your full address..."
            class="w-full px-3 py-2 rounded-xl border border-emerald-200 bg-white text-sm font-semibold outline-none"></textarea>
        </div>

        <button type="submit"
          class="mt-1 px-4 py-3 rounded-2xl text-sm font-extrabold text-white
          bg-gradient-to-b from-emerald-500 to-emerald-600 hover:brightness-95 border border-emerald-200/20">
          Confirm Order
        </button>

        <p id="ofMsg" class="text-xs font-semibold text-emerald-900/70 text-center"></p>
      </form>
    </div>
  </div>

<script>
/* ============ FAN POSITIONS (Tailwind arbitrary transforms) ============ */
const POS = {
  l2: "z-[2] opacity-[.78] [transform:translateX(-48%)_rotate(-18deg)_scale(.85)]",
  l1: "z-[4] [transform:translateX(-28%)_rotate(-10deg)_scale(.92)]",
  c : "z-[5] [transform:translateX(0%)_rotate(0deg)_scale(1)]",
  r1: "z-[4] [transform:translateX(28%)_rotate(10deg)_scale(.92)]",
  r2: "z-[2] opacity-[.78] [transform:translateX(48%)_rotate(18deg)_scale(.85)]",
};

const fan = document.getElementById("fan");
let cards = Array.from(document.querySelectorAll(".fan-card"));

function applyFanLayout(list){
  cards.forEach(c => {
    c.classList.remove(...Object.values(POS).join(" ").split(" ").filter(Boolean));
    c.classList.remove("hidden");
  });

  const set = new Set(list);
  cards.forEach(c => { if (!set.has(c)) c.classList.add("hidden"); });

  const visible = list;
  const n = visible.length;

  const map = {
    1: ["c"],
    2: ["l1","r1"],
    3: ["l1","c","r1"],
    4: ["l2","l1","r1","r2"],
    5: ["l2","l1","c","r1","r2"],
  };
  const keys = map[Math.min(n,5)] || map[5];

  visible.forEach((el, i) => {
    const k = keys[i] || "c";
    el.classList.add(...POS[k].split(" "));
  });
}
applyFanLayout(cards);

/* ============ AUTO ROTATE (only when showing all 5) ============ */
let rotateTimer = null;
function startRotate(){
  stopRotate();
  rotateTimer = setInterval(() => {
    if (modal.classList.contains("flex") || orderModal.classList.contains("flex")) return;
    const visible = cards.filter(c => !c.classList.contains("hidden"));
    if (visible.length !== cards.length) return;

    fan.appendChild(fan.children[0]);
    cards = Array.from(document.querySelectorAll(".fan-card"));
    applyFanLayout(cards);
  }, 3500);
}
function stopRotate(){ if (rotateTimer) clearInterval(rotateTimer); rotateTimer = null; }
startRotate();

/* ============ SEARCH FILTER ============ */
const searchInput = document.getElementById("searchInput");
const clearBtn = document.getElementById("clearBtn");
const resultHint = document.getElementById("resultHint");

function normalize(s){ return String(s||"").toLowerCase().trim(); }

function doSearch(){
  const q = normalize(searchInput.value);

  if (!q){
    cards = Array.from(document.querySelectorAll(".fan-card"));
    applyFanLayout(cards);
    resultHint.textContent = "Showing all products.";
    return;
  }

  const filtered = cards.filter(c => normalize(c.dataset.key).includes(q) || normalize(c.dataset.title).includes(q));
  applyFanLayout(filtered);

  if (filtered.length === 0){
    resultHint.textContent = `No match for "${q}". Try: shirt / pant / shoe / cap / sunglasses`;
  } else if (filtered.length === 1){
    resultHint.textContent = `Showing: ${filtered[0].dataset.title}`;
  } else {
    resultHint.textContent = `Showing ${filtered.length} results for "${q}".`;
  }
}

searchInput.addEventListener("input", doSearch);
clearBtn.addEventListener("click", () => { searchInput.value=""; doSearch(); searchInput.focus(); });
doSearch();

/* ============ MODAL + ZOOM/PAN/THUMBS + DETAILS ============ */
const modal = document.getElementById("modal");
const modalPanel = document.getElementById("modalPanel");
const modalBackdrop = document.getElementById("modalBackdrop");
const modalImg = document.getElementById("modalImg");
const modalTitle = document.getElementById("modalTitle");
const metaName = document.getElementById("metaName");
const metaDesc = document.getElementById("metaDesc");
const metaPrice = document.getElementById("metaPrice");
const metaStock = document.getElementById("metaStock");
const metaSizes = document.getElementById("metaSizes");
const metaColors = document.getElementById("metaColors");
const thumbStrip = document.getElementById("thumbStrip");

let activeIndex = 0;
let lastOpenedCard = null;

function getVisibleCards(){
  return cards.filter(c => !c.classList.contains("hidden"));
}
function parseImages(card){
  return (card.dataset.images || "")
    .split(",").map(s => s.trim()).filter(Boolean);
}

function openModal(card){
  lastOpenedCard = card;
  const visible = getVisibleCards();
  activeIndex = Math.max(0, visible.indexOf(card));

  const title = card.dataset.title || "Preview";
  const desc  = card.dataset.desc || "";
  const price = card.dataset.price || "—";
  const stock = card.dataset.stock || "—";
  const sizes = card.dataset.sizes || "—";
  const colors= card.dataset.colors || "—";
  const images = parseImages(card);

  modalTitle.textContent = title;
  metaName.textContent = title;
  metaDesc.textContent = desc;
  metaPrice.textContent = price;
  metaStock.textContent = stock;
  metaSizes.textContent = sizes;
  metaColors.textContent = colors;

  modalImg.src = images[0] || "";
  renderThumbs(images);

  modal.classList.remove("hidden");
  modal.classList.add("flex");
  requestAnimationFrame(() => {
    modalPanel.classList.remove("translate-y-2","scale-[.98]","opacity-0");
    modalPanel.classList.add("translate-y-0","scale-100","opacity-100");
  });

  document.body.style.overflow = "hidden";
  resetView();
}

function closeModal(){
  modalPanel.classList.add("translate-y-2","scale-[.98]","opacity-0");
  modalPanel.classList.remove("translate-y-0","scale-100","opacity-100");
  setTimeout(() => {
    modal.classList.add("hidden");
    modal.classList.remove("flex");
    document.body.style.overflow = "";
  }, 180);
}

cards.forEach(c => c.addEventListener("click", (e) => {
  // If order button clicked, don't open preview
  if (e.target.closest(".orderBtn")) return;
  openModal(c);
}));

modalBackdrop.addEventListener("click", closeModal);
document.getElementById("closeBtn").addEventListener("click", closeModal);

document.getElementById("prevBtn").addEventListener("click", () => {
  const visible = getVisibleCards();
  if (!visible.length) return;
  activeIndex = (activeIndex - 1 + visible.length) % visible.length;
  openModal(visible[activeIndex]);
});
document.getElementById("nextBtn").addEventListener("click", () => {
  const visible = getVisibleCards();
  if (!visible.length) return;
  activeIndex = (activeIndex + 1) % visible.length;
  openModal(visible[activeIndex]);
});

document.getElementById("openImgBtn").addEventListener("click", () => modalImg.src && window.open(modalImg.src, "_blank"));
document.getElementById("copyLinkBtn").addEventListener("click", async () => {
  try{
    await navigator.clipboard.writeText(modalImg.src || "");
    const btn = document.getElementById("copyLinkBtn");
    const old = btn.textContent;
    btn.textContent = "Copied ✅";
    setTimeout(()=> btn.textContent = old, 900);
  }catch(e){
    alert("Copy failed (clipboard blocked).");
  }
});
document.getElementById("downloadBtn").addEventListener("click", () => {
  if (!modalImg.src) return;
  const a = document.createElement("a");
  a.href = modalImg.src;
  a.download = (metaName.textContent || "image").replace(/\s+/g,"_") + ".jpg";
  document.body.appendChild(a);
  a.click();
  a.remove();
});

function renderThumbs(images){
  thumbStrip.innerHTML = images.map((src, i) => `
    <button class="thumbBtn shrink-0 w-[92px] h-[58px] rounded-[14px] overflow-hidden border border-emerald-200/60 bg-slate-950
      hover:-translate-y-[2px] hover:opacity-100 transition
      ${i===0 ? "outline outline-4 outline-emerald-300/40 opacity-100" : "opacity-90"}
    " data-i="${i}">
      <img class="w-full h-full object-cover block" src="${src}" alt="">
    </button>
  `).join("");

  thumbStrip.querySelectorAll(".thumbBtn").forEach(btn => {
    btn.addEventListener("click", () => {
      const i = Number(btn.dataset.i);
      const card = lastOpenedCard;
      const imgs = parseImages(card);
      modalImg.src = imgs[i] || imgs[0] || "";

      thumbStrip.querySelectorAll(".thumbBtn").forEach(b => b.classList.remove("outline","outline-4","outline-emerald-300/40","opacity-100"));
      btn.classList.add("outline","outline-4","outline-emerald-300/40","opacity-100");
      resetView();
    });
  });
}

/* ============ ZOOM / PAN ============ */
let scale = 1, tx = 0, ty = 0;
let isDragging = false;
let startX = 0, startY = 0, startTx = 0, startTy = 0;

const viewport = document.getElementById("viewport");
const previewBox = document.getElementById("previewBox");

function clamp(v, min, max){ return Math.max(min, Math.min(max, v)); }
function applyTransform(){
  modalImg.style.transform = `translate(calc(-50% + ${tx}px), calc(-50% + ${ty}px)) scale(${scale})`;
}
function resetView(){ scale = 1; tx = 0; ty = 0; applyTransform(); }

function zoomTo(newScale, cx=null, cy=null){
  const prev = scale;
  scale = clamp(newScale, 0.6, 4);

  if (cx !== null && cy !== null){
    const rect = previewBox.getBoundingClientRect();
    const px = cx - rect.left - rect.width/2;
    const py = cy - rect.top  - rect.height/2;
    const r = scale / prev;
    tx = tx + px - px * r;
    ty = ty + py - py * r;
  }
  applyTransform();
}

document.getElementById("zoomInBtn").addEventListener("click", () => zoomTo(scale + 0.2));
document.getElementById("zoomOutBtn").addEventListener("click", () => zoomTo(scale - 0.2));
document.getElementById("resetBtn").addEventListener("click", resetView);

previewBox.addEventListener("wheel", (e) => {
  if (!modal.classList.contains("flex")) return;
  e.preventDefault();
  const delta = e.deltaY > 0 ? -0.18 : 0.18;
  zoomTo(scale + delta, e.clientX, e.clientY);
}, { passive:false });

viewport.addEventListener("mousedown", (e) => {
  if (!modal.classList.contains("flex")) return;
  isDragging = true;
  startX = e.clientX; startY = e.clientY;
  startTx = tx; startTy = ty;
  viewport.classList.remove("cursor-grab");
  viewport.classList.add("cursor-grabbing");
});
window.addEventListener("mousemove", (e) => {
  if (!isDragging) return;
  tx = startTx + (e.clientX - startX);
  ty = startTy + (e.clientY - startY);
  applyTransform();
});
window.addEventListener("mouseup", () => {
  isDragging = false;
  viewport.classList.remove("cursor-grabbing");
  viewport.classList.add("cursor-grab");
});

document.addEventListener("keydown", (e) => {
  if (orderModal.classList.contains("flex")) {
    if (e.key === "Escape") closeOrder();
    return;
  }
  if (!modal.classList.contains("flex")) return;

  if (e.key === "Escape") closeModal();

  const visible = getVisibleCards();
  if (e.key === "ArrowLeft" && visible.length) {
    activeIndex = (activeIndex - 1 + visible.length) % visible.length;
    openModal(visible[activeIndex]);
  }
  if (e.key === "ArrowRight" && visible.length) {
    activeIndex = (activeIndex + 1) % visible.length;
    openModal(visible[activeIndex]);
  }

  if (e.key === "+" || e.key === "=") zoomTo(scale + 0.2);
  if (e.key === "-" || e.key === "_") zoomTo(scale - 0.2);
  if (e.key === "0") resetView();
});

/* ============ ORDER FLOW ============ */
const orderModal = document.getElementById("orderModal");
const orderPanel = document.getElementById("orderPanel");
const orderBackdrop = document.getElementById("orderBackdrop");
const orderCloseBtn = document.getElementById("orderCloseBtn");
const orderForm = document.getElementById("orderForm");

const ofProduct = document.getElementById("ofProduct");
const ofPrice = document.getElementById("ofPrice");
const ofStock = document.getElementById("ofStock");
const ofSize = document.getElementById("ofSize");
const ofColor = document.getElementById("ofColor");
const ofQty = document.getElementById("ofQty");
const ofPhone = document.getElementById("ofPhone");
const ofAddress = document.getElementById("ofAddress");
const ofMsg = document.getElementById("ofMsg");

let currentOrderCard = null;

function openOrder(card){
  currentOrderCard = card;

  const title = card.dataset.title || "—";
  const price = card.dataset.price || "—";
  const stock = card.dataset.stock || "—";
  const sizes = (card.dataset.sizes || "").split(",").map(s => s.trim()).filter(Boolean);
  const colors= (card.dataset.colors || "").split(",").map(s => s.trim()).filter(Boolean);

  ofProduct.textContent = title;
  ofPrice.textContent = price;
  ofStock.textContent = stock;

  // fill selects
  ofSize.innerHTML = `<option value="">Select size</option>` + sizes.map(s=>`<option value="${s}">${s}</option>`).join("");
  ofColor.innerHTML = `<option value="">Select color</option>` + colors.map(c=>`<option value="${c}">${c}</option>`).join("");

  // reset inputs
  ofQty.value = 1;
  ofPhone.value = "";
  ofAddress.value = "";
  ofMsg.textContent = "";

  orderModal.classList.remove("hidden");
  orderModal.classList.add("flex");

  requestAnimationFrame(() => {
    orderPanel.classList.remove("translate-y-2","scale-[.98]","opacity-0");
    orderPanel.classList.add("translate-y-0","scale-100","opacity-100");
  });

  document.body.style.overflow = "hidden";
}

function closeOrder(){
  orderPanel.classList.add("translate-y-2","scale-[.98]","opacity-0");
  orderPanel.classList.remove("translate-y-0","scale-100","opacity-100");
  setTimeout(() => {
    orderModal.classList.add("hidden");
    orderModal.classList.remove("flex");
    // keep modal open or not? Here: if preview modal open, keep body locked
    if (!modal.classList.contains("flex")) document.body.style.overflow = "";
  }, 180);
}

orderBackdrop.addEventListener("click", closeOrder);
orderCloseBtn.addEventListener("click", closeOrder);

// Card order buttons
document.querySelectorAll(".orderBtn").forEach((btn) => {
  btn.addEventListener("click", (e) => {
    e.stopPropagation();
    const card = e.target.closest(".fan-card");
    if (!card) return;
    // If preview modal is open, keep it, just open order modal on top
    openOrder(card);
  });
});

// Modal order button
document.getElementById("orderNowBtn").addEventListener("click", () => {
  if (!lastOpenedCard) return;
  openOrder(lastOpenedCard);
});

/* Submit order (demo) */
orderForm.addEventListener("submit", (e) => {
  e.preventDefault();

  const payload = {
    product: ofProduct.textContent,
    price: ofPrice.textContent,
    size: ofSize.value,
    color: ofColor.value,
    qty: Number(ofQty.value || 1),
    phone: ofPhone.value.trim(),
    address: ofAddress.value.trim(),
  };

  // basic validation
  if (!payload.size) return ofMsg.textContent = "Please select size.";
  if (!payload.color) return ofMsg.textContent = "Please select color.";
  if (!payload.phone) return ofMsg.textContent = "Please enter phone number.";
  if (!payload.address) return ofMsg.textContent = "Please enter delivery address.";

  // Demo success (you can send payload to WhatsApp / API later)
  ofMsg.textContent = "✅ Recall saved (demo). You can connect this to WhatsApp/API.";

  console.log("ORDER PAYLOAD:", payload);
});
</script>

</body>
</html>
